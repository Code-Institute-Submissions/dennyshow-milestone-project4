{"filter":false,"title":"contexts.py","tooltip":"/basket/contexts.py","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":21,"column":0},"action":"remove","lines":["from django.shortcuts import get_object_or_404","from products.models import Product","from auctions.models import Auction","","","def basket_contexts(request):","    # Ensures basket contents are available","    ","    basket = request.session.get('basket', {})","    ","    basket_items = []","    total = 0","    product_count = 0","    for id, quantity in basket_items():","        product = get_object_or_404(Product, Auction, pk=id)","        total += quantity * product.quantity","        product_count += quantity","        basket_items.append({\"id\":id, 'quantity': quantity, 'product':product})","        ","    return { 'basket_items': basket_items, 'total': total, 'product_count': product_count }","    ",""],"id":253}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":0,"column":0},"end":{"row":0,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1576024102347,"hash":"40319b489edeac1b1091c249077d6a6912715022"}